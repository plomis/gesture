!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self)["plomis-gesture"]=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t){return"object"==typeof t?null!==t:"function"==typeof t}function o(t){if(!i(t))throw TypeError(t+" is not an object!");return t}function n(t){try{return!!t()}catch(t){return!0}}function c(t,e){return d.call(t,e)}function s(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+w).toString(36))}function p(o,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(o),void 0===i)return o;switch(t){case 1:return function(t){return o.call(i,t)};case 2:return function(t,e){return o.call(i,t,e)};case 3:return function(t,e,n){return o.call(i,t,e,n)}}return function(){return o.apply(i,arguments)}}var v=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),y=e(function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),r=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),a=v.document,u=i(a)&&i(a.createElement),l=!r&&!n(function(){return 7!=Object.defineProperty(function(t){return u?a.createElement(t):{}}("div"),"a",{get:function(){return 7}}).a}),f=Object.defineProperty,h={f:r?Object.defineProperty:function(t,e,n){if(o(t),e=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}(e,!0),o(n),l)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},g=r?function(t,e,n){return h.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},d={}.hasOwnProperty,m=0,w=Math.random(),b=e(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),P=b("native-function-to-string",Function.toString),_=e(function(t){var r=s("src"),e="toString",a=(""+P).split(e);y.inspectSource=function(t){return P.call(t)},(t.exports=function(t,e,n,o){var i="function"==typeof n;i&&(c(n,"name")||g(n,"name",e)),t[e]!==n&&(i&&(c(n,r)||g(n,r,t[e]?""+t[e]:a.join(e+""))),t===v?t[e]=n:o?t[e]?t[e]=n:g(t,e,n):(delete t[e],g(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[r]||P.call(this)})}),O="prototype",x=function(t,e,n){var o,i,r,a,c=t&x.F,s=t&x.G,u=t&x.P,l=t&x.B,f=s?v:t&x.S?v[e]||(v[e]={}):(v[e]||{})[O],h=s?y:y[e]||(y[e]={}),d=h[O]||(h[O]={});for(o in s&&(n=e),n)r=((i=!c&&f&&void 0!==f[o])?f:n)[o],a=l&&i?p(r,v):u&&"function"==typeof r?p(Function.call,r):r,f&&_(f,o,r,t&x.U),h[o]!=r&&g(h,o,a),u&&d[o]!=r&&(d[o]=r)};v.core=y,x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;function E(t){return A.call(t).slice(8,-1)}function M(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function S(t){return Object(M(t))}function j(t){return isNaN(t=+t)?0:(0<t?L:R)(t)}function T(t){return 0<t?I(j(t),9007199254740991):0}function C(t,e){return new(function(t){var e;return X(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!X(e.prototype)||(e=void 0),i(e)&&null===(e=e[K])&&(e=void 0)),void 0===e?Array:e}(t))(e)}var k=x,A={}.toString,D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==E(t)?t.split(""):Object(t)},R=Math.ceil,L=Math.floor,I=Math.min,X=Array.isArray||function(t){return"Array"==E(t)},F=e(function(t){var e=b("wks"),n=v.Symbol,o="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=o&&n[t]||(o?n:s)("Symbol."+t))}).store=e}),K=F("species"),Y=F("unscopables"),H=Array.prototype;null==H[Y]&&g(H,Y,{});function q(t){H[Y][t]=!0}var U,W,N,z,B,V,$,G,Z,J=(N=1==(U=5),z=2==U,B=3==U,V=4==U,$=6==U,G=5==U||$,Z=W||C,function(t,e,n){for(var o,i,r=S(t),a=D(r),c=p(e,n,3),s=T(a.length),u=0,l=N?Z(t,s):z?Z(t,0):void 0;u<s;u++)if((G||u in a)&&(i=c(o=a[u],u,r),U))if(N)l[u]=i;else if(i)switch(U){case 3:return!0;case 5:return o;case 6:return u;case 2:l.push(o)}else if(V)return!1;return $?-1:B||V?V:l}),Q="find",tt=!0;Q in[]&&[,][Q](function(){tt=!1}),k(k.P+k.F*tt,"Array",{find:function(t){return J(this,t,1<arguments.length?arguments[1]:void 0)}}),q(Q);function et(t,e){return(t=j(t))<0?nt(t+e,0):ot(t,e)}var nt=Math.max,ot=Math.min;k(k.P,"Array",{fill:function(t){for(var e=S(this),n=T(e.length),o=arguments.length,i=et(1<o?arguments[1]:void 0,n),r=2<o?arguments[2]:void 0,a=void 0===r?n:et(r,n);i<a;)e[i++]=t;return e}}),q("fill");function it(t){return D(M(t))}function rt(c){return function(t,e,n){var o,i=it(t),r=T(i.length),a=et(n,r);if(c&&e!=e){for(;a<r;)if((o=i[a++])!=o)return!0}else for(;a<r;a++)if((c||a in i)&&i[a]===e)return c||a||0;return!c&&-1}}var at=rt(!0);k(k.P,"Array",{includes:function(t){return at(this,t,1<arguments.length?arguments[1]:void 0)}}),q("includes");function ct(t,e,n){if(function(t){var e;return i(t)&&(void 0!==(e=t[st])?!!e:"RegExp"==E(t))}(e))throw TypeError("String#"+n+" doesn't accept regex!");return M(t)+""}var st=F("match"),ut=F("match"),lt="includes";function ft(t){return function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}k(k.P+k.F*function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[ut]=!1,!"/./"[e](n)}catch(t){}}return!0}(lt),"String",{includes:function(t){return!!~ct(this,t,lt).indexOf(t,1<arguments.length?arguments[1]:void 0)}});var ht,dt=b("keys"),pt=rt(!1),vt=dt[ht="IE_PROTO"]||(dt[ht]=s(ht)),yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return function(t,e){var n,o=it(t),i=0,r=[];for(n in o)n!=vt&&c(o,n)&&r.push(n);for(;i<e.length;)c(o,n=e[i++])&&(~pt(r,n)||r.push(n));return r}(t,yt)},mt={f:Object.getOwnPropertySymbols},wt={f:{}.propertyIsEnumerable},bt=Object.assign,Pt=!bt||n(function(){var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=bt({},t)[n]||Object.keys(bt({},e)).join("")!=o})?function(t,e){for(var n=S(t),o=arguments.length,i=1,r=mt.f,a=wt.f;i<o;)for(var c,s=D(arguments[i++]),u=r?gt(s).concat(r(s)):gt(s),l=u.length,f=0;f<l;)a.call(s,c=u[f++])&&(n[c]=s[c]);return n}:bt;k(k.S+k.F,"Object",{assign:Pt});var _t=e(function(t,e){function n(){return!1}function o(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},halt:function(t){t?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},e.default=i,t.exports=e.default});t(_t);var Ot=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var Mt=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,o,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),r=1;r<arguments.length;r++){for(var a in n=Object(arguments[r]))xt.call(n,a)&&(i[a]=n[a]);if(Ot){o=Ot(n);for(var c=0;c<o.length;c++)Et.call(n,o[c])&&(i[o[c]]=n[o[c]])}}return i},St=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(_t),o=n(Mt),i=!0,u=!1,l=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function c(t){return null==t}var f=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(t,e){c(t.which)&&(t.which=c(e.charCode)?e.keyCode:e.charCode),void 0===t.metaKey&&(t.metaKey=t.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(t,e){var n=void 0,o=void 0,i=void 0,r=e.wheelDelta,a=e.axis,c=e.wheelDeltaY,s=e.wheelDeltaX,u=e.detail;r&&(i=r/120),u&&(i=0-(u%3==0?u/3:u)),void 0!==a&&(a===t.HORIZONTAL_AXIS?n=(o=0)-i:a===t.VERTICAL_AXIS&&(n=0,o=i)),void 0!==c&&(o=c/120),void 0!==s&&(n=-1*s/120),n||o||(o=i),void 0!==n&&(t.deltaX=n),void 0!==o&&(t.deltaY=o),void 0!==i&&(t.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(t,e){var n=void 0,o=void 0,i=void 0,r=t.target,a=e.button;return r&&c(t.pageX)&&!c(e.clientX)&&(i=(n=r.ownerDocument||document).body,t.pageX=e.clientX+((o=n.documentElement)&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),!t.relatedTarget&&t.fromElement&&(t.relatedTarget=t.fromElement===r?t.toElement:t.fromElement),t}}];function h(){return i}function d(){return u}function r(t){var e=t.type,n="function"==typeof t.stopPropagation||"boolean"==typeof t.cancelBubble;s.default.call(this);var o=d;"defaultPrevented"in(this.nativeEvent=t)?o=t.defaultPrevented?h:d:"getPreventDefault"in t?o=t.getPreventDefault()?h:d:"returnValue"in t&&(o=t.returnValue===u?h:d),this.isDefaultPrevented=o;var i=[],r=void 0,a=void 0,c=l.concat();for(f.forEach(function(t){e.match(t.reg)&&(c=c.concat(t.props),t.fix&&i.push(t.fix))}),r=c.length;r;)this[a=c[--r]]=t[a];for(!this.target&&n&&(this.target=t.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),r=i.length;r;)(0,i[--r])(this,t);this.timeStamp=t.timeStamp||Date.now()}var a=s.default.prototype;(0,o.default)(r.prototype,a,{constructor:r,preventDefault:function(){var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=u,a.preventDefault.call(this)},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=i,a.stopPropagation.call(this)}}),e.default=r,t.exports=e.default});t(St);var jt=t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,e,o,i){function r(t){var e=new a.default(t);o.call(n,e)}if(n.addEventListener){var t=function(){var t=!1;return"object"==typeof i?t=i.capture||!1:"boolean"==typeof i&&(t=i),n.addEventListener(e,r,i||!1),{v:{remove:function(){n.removeEventListener(e,r,t)}}}}();if("object"==typeof t)return t.v}else if(n.attachEvent)return n.attachEvent("on"+e,r),{remove:function(){n.detachEvent("on"+e,r)}}};var n,a=(n=St)&&n.__esModule?n:{default:n};t.exports=e.default}));function Tt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ct(){return screen.orientation&&Tt(window,"onorientationchange")?screen.orientation.type.includes("landscape"):window.innerHeight<window.innerWidth}function kt(t,e){for(var n=0,o=t.length;n<o;n++)t[n](e)}for(var At=function(){var t=window.whatenvis,e=function(o){return function(t){return t.reduce(function(t,e){if(!1!==t)return t;var n=o.match(e);return n?n[1]||!0:t},!1)}}(navigator.userAgent.toLowerCase()),n={android:e([/android\s([\d.]+)/]),macos:e([/\(macintosh;\sintel\smac\sos\sx\s([\d_]+)/]),windows:e([/windows\snt\s([\d.]+)/]),ios:e([/\(i[^;]+;( U;)? CPU.+Mac OS X/]),ipad:e([/\(ipad.*os\s([\d_]+)/]),iphone:e([/iphone\sos\s([\d_]+)/]),windowsPhone:e([/windows\sphone\s([\d.]+)/]),androidPhone:e([/android\s([\d.]+).*\smobile\s.*/]),kindle:e([/kindle\/([\d.]+)/]),ie:e([/msie ([\d.]+)/,/rv:([\d.]+)\) like gecko/]),edge:e([/edge\/([\d.]+)/]),firefox:e([/firefox\/([\d.]+)/]),opera:e([/(?:opera|opr).([\d.]+)/]),chrome:e([/chrome\/([\d.]+)/,/crios\/([\d.]+)/]),chromeMobile:e([/crios\/([\d.]+)/]),safari:e([/version\/([\d.]+).*safari/]),wechat:e([/micromessenger\/([\d.]+)/]),alipay:e([/alipayclient\/([\d.]+)/])},o=e([/android\s.*;\s([^;]*)\sbuild\/.*/]),i=o&&o.match(/\spad\s/);if(n.androidPhone=n.androidPhone&&!i,n.chrome=!n.edge&&n.chrome,n.safari=!!(n.ios||n.macos||n.windows)&&n.safari,n.androidTablet=!n.androidPhone&&!!n.android,n.windowsTablet=e([/touch/])&&!n.windowsPhone&&n.windows,n.phone=!!(n.iphone||n.androidPhone||n.windowsPhone),n.tablet=!!(n.ipad||n.androidTablet||n.windowsTablet||e([/tablet/])),n.safariMobile=(n.ipad||n.iphone)&&n.safari,n.iosWechat=n.ios&&n.wechat,n.androidWechat=n.android&&n.wechat,n.iosAlipay=n.ios&&n.alipay,n.androidAlipay=n.android&&n.alipay,n.pc=!n.phone&&!n.tablet&&!n.kindle,n.tablet||n.phone){n.landscape=Ct(),n.portrait=!n.landscape;var r=[];n.onChangeOrientation=function(t){"function"==typeof t&&r.push(t)};var a="resize";Tt(window,"onorientationchange")&&(a="orientationchange"),window.addEventListener&&window.addEventListener(a,function(t,e){return function(){Ct()?kt(t,"landscape"):kt(t,"portrait"),e()}}(r,function(){n.landscape=Ct(),n.portrait=!n.landscape}),!1)}return n.noConflict=function(){return window.whatenvis=t,n},window.whatenvis=n}(),Dt=0,Rt=["ms","moz","webkit","o"],Lt=window.requestAnimationFrame,It=window.cancelAnimationFrame,Xt=0;Xt<4&&!Lt;++Xt)Lt=window[Rt[Xt]+"RequestAnimationFrame"],It=window[Rt[Xt]+"CancelAnimationFrame"]||window[Rt[Xt]+"CancelRequestAnimationFrame"];Lt||(Lt=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-Dt)),o=window.setTimeout(function(){t(e+n)},n);return Dt=e+n,o}),It||(It=function(t){clearTimeout(t)});var Ft=Lt;var Kt={arraySize:3,sideLength:300,onStateChange:function(){},onChange:function(){},onEnd:function(){},circleRadius:0,pointRadius:0,lineWidth:3,stateColors:{normal:"#afafaf",selected:"#ffffff",checking:"#ffffff",success:"#2CFF26",error:"#de462d"}};function Yt(t,e){this.wrapper="string"==typeof t?document.querySelector(t):t,this.wrapper||console.warn("Can not resolve the wrapper DOM."),this._init(e)}return Yt.prototype._init=function(t){if(this.mouseDownEvent=null,this.mouseMoveEvent=null,this.mouseUpEvent=null,this.touchCancel=null,this.touchEnd=null,this.touchMove=null,this.touchStart=null,this.state="normal",this.devicePixelRatio=window.devicePixelRatio||1,this.hitPointId=null,this.totalPoints=[],this.hitPoints=[],this.touchPoint=null,this.options=Object.assign({},Kt,t),0===this.options.circleRadius){var e=this.options,n=e.sideLength*this.devicePixelRatio/(1+4*e.arraySize);this.options.circleRadius=n,this.options.pointRadius=n/3}this._initCanvas(),this._initKey(),this._draw(),this._initMouseEvent()},Yt.prototype._initCanvas=function(){var t=document.createElement("canvas"),e=this.options.sideLength;t.width=this.devicePixelRatio*e,t.height=this.devicePixelRatio*e,t.style.width=e+"px",t.style.height=e+"px",t.style.backgroundColor="transparent",this.canvas=t,this.context=t.getContext("2d"),this.wrapper.appendChild(t)},Yt.prototype._initKey=function(){for(var t=0,e=this.options.arraySize,n=this.options.circleRadius,o=0;o<e;o++)for(var i=0;i<e;i++){this.totalPoints.push({x:4*i*n+2.5*n,y:4*o*n+2.5*n,index:++t,row:o+1,col:i+1})}},Yt.prototype._draw=function(){var n=this;this._clearCanvas();var o=this.options.stateColors,i=this.context,r=this.state,t=this.totalPoints,e=this.touchPoint,a=this.hitPoints;this._drawLine(i,e?[].concat(ft(a),[e]):a,o[r]),t.forEach(function(t){var e=a.includes(t);n._drawKey(i,t.x,t.y,e,e?o[r]:o.normal)})},Yt.prototype._drawLine=function(e,t,n){1<t.length&&(e.strokeStyle=n,e.lineWidth=5,e.beginPath(),e.moveTo(t[0].x,t[0].y),t.forEach(function(t){return e.lineTo(t.x,t.y)}),e.stroke())},Yt.prototype._drawKey=function(t,e,n,o,i){var r=this.options,a=r.circleRadius,c=r.pointRadius,s=r.lineWidth;t.fillStyle=i,t.strokeStyle=i,t.lineWidth=s,t.beginPath(),t.arc(e,n,a,0,2*Math.PI,!0),t.closePath(),t.stroke(),o&&(t.lineWidth=0,t.beginPath(),t.arc(e,n,c,0,2*Math.PI,!0),t.fill())},Yt.prototype._clearCanvas=function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)},Yt.prototype._initMouseEvent=function(){var e=this;At.pc?this.mouseDownEvent=jt(this.canvas,"mousedown",function(t){e._handleTouchStart(Object.assign(t,{touches:[{clientX:t.pageX,clientY:t.pageY}]})),e.mouseMoveEvent=jt(document,"mousemove",function(t){e._handleTouchMove(Object.assign(t,{touches:[{clientX:t.pageX,clientY:t.pageY}]}))}),e.mouseUpEvent=jt(document,"mouseup",function(t){e._handleTouchCancel(t),e.mouseUpEvent.remove(),e.mouseMoveEvent.remove()})}):(this.touchCancel=jt(this.canvas,"touchcanel",function(t){return e._handleTouchCancel(t)}),this.touchEnd=jt(this.canvas,"touchend",function(t){return e._handleTouchCancel(t)}),this.touchMove=jt(this.canvas,"touchmove",function(t){return e._handleTouchMove(t)}),this.touchStart=jt(this.canvas,"touchstart",function(t){return e._handleTouchStart(t)}))},Yt.prototype._handleTouchStart=function(t){t.stopPropagation(),t.preventDefault(),"normal"===this.state&&(this.state="selected"),"normal"===this.state&&this.options.onStateChange("selected"),this._handleHitPoint(t)},Yt.prototype._handleTouchMove=function(t){t.stopPropagation(),t.preventDefault(),this._handleHitPoint(t)},Yt.prototype._handleTouchCancel=function(t){t.stopPropagation(),t.preventDefault(),"selected"===this.state&&(this.state||(this.state="normal"),this.options.onStateChange("normal"),this._handleHitOver())},Yt.prototype._handleHitOver=function(){var t=this;Ft(function(){t.options.onEnd(t.hitPoints.map(function(t){return t.index})),t.touchPoint=null,t._draw()})},Yt.prototype._handleHitPoint=function(t){var o=this,i=t.touches;null===this.hitPointId&&(this.hitPointId=Ft(function(){o.hitPointId=null;var t=o.devicePixelRatio;if("selected"===o.state){var e=function(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}(o.canvas);if(0<i.length){var n=i[0];o.touchPoint={x:(n.clientX-e.left)*t,y:(n.clientY-e.top)*t},o._updateKeyboard()}}}))},Yt.prototype._updateKeyboard=function(){this._updateKey(),this._updateLine()},Yt.prototype._updateKey=function(){var t=this.hitPoints,e=this.touchPoint,n=this.circleRadius,o=this._findHitPoint(e);if(o&&!t.includes(o)){if(0<t.length){var i=t[t.length-1],r=this._findNearPoints(i),a=this._findCrossover(e,i,r,n);a&&!t.includes(a)&&a.forEach(this._addHitPoint)}this._addHitPoint(o),this._draw()}},Yt.prototype._updateLine=function(){this._draw()},Yt.prototype._addHitPoint=function(t){var e=this.hitPoints;e.push(t),this.options.onChange(e.map(function(t){return t.index}))},Yt.prototype._findHitPoint=function(e){var n=this.options.circleRadius;return this.totalPoints.find(function(t){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n,2)})},Yt.prototype._findNearPoints=function(e){var n=this.hitPoints;return this.totalPoints.filter(function(t){return!n.includes(t)&&Math.abs(t.row-e.row)<=1&&Math.abs(t.col-e.col)<=1})},Yt.prototype._findCrossover=function(o,t,e,n){if(0<e.length){var i=e.reduce(function(t,e){var n=Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2);return t?n<t.distance?{circleCenter:e,distance:n}:t:{circleCenter:e,distance:n}},null).circleCenter,r=Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2),a=Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2),c=Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2);if(r-Math.pow(n,2)<a&&c<a){var s=(1-Math.pow((r+c-a)/(2*Math.sqrt(r)*Math.sqrt(c)),2))*r;return Math.pow(n,2)<s?[]:[i]}}return[]},Yt.prototype.changeState=function(t){this.state=t,this._draw()},Yt.prototype.reset=function(){this.hitPoints=[],this.state="normal",this._draw()},Yt.version="1.0.0",Yt});
